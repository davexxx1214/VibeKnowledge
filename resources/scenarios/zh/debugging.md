## 调试优化场景规范

### 错误诊断流程
1. **完整阅读错误信息**
   - 错误类型和错误消息
   - 完整的堆栈跟踪
   - 错误发生的上下文

2. **定位错误位置**
   - 确定具体的文件和行号
   - 识别相关的代码路径
   - 查看最近的代码修改

3. **分析原因**
   - 变量状态和数据流
   - 逻辑错误或边界情况
   - 外部依赖问题
   - 环境配置问题

4. **提供解决方案**
   - 修复代码并说明原理
   - 提供多种解决方案（如适用）
   - 说明潜在的副作用
   - 建议如何避免类似问题

5. **验证修复**
   - 测试修复后的代码
   - 检查是否引入新问题
   - 更新相关测试

### 性能优化

#### 分析方法
- 使用性能分析工具（Profiler）
- 识别性能瓶颈（CPU/内存/IO）
- 测量优化前后的指标
- 设定优化目标

#### 优化重点
- **执行效率**
  - 算法复杂度优化
  - 避免不必要的计算
  - 缓存重复计算结果
  - 并行处理和异步操作

- **内存使用**
  - 避免内存泄漏
  - 及时释放资源
  - 使用对象池
  - 数据结构选择

- **加载速度**
  - 代码分割和懒加载
  - 资源压缩和优化
  - CDN 和缓存策略
  - 预加载和预取

- **用户体验**
  - 减少首屏时间
  - 优化交互响应
  - 平滑的动画和过渡
  - 加载状态反馈

### 代码重构

#### 重构原则
- **保持功能不变**：先写测试保护
- **小步重构**：每次改动小而安全
- **持续测试**：每次改动后运行测试
- **提交频繁**：便于回滚

#### 重构目标
- 提高代码可读性
- 减少重复代码（DRY）
- 简化复杂逻辑
- 改善代码结构
- 遵循设计模式和最佳实践

#### 常见重构
- 提取函数/方法
- 提取变量
- 重命名
- 合并重复代码
- 分解大函数/类
- 引入设计模式

### 代码审查清单

- [ ] **代码规范**：符合项目风格指南
- [ ] **命名规范**：变量/函数名有意义
- [ ] **代码结构**：逻辑清晰，职责单一
- [ ] **错误处理**：完善的异常处理
- [ ] **安全性**：无明显安全漏洞
- [ ] **性能**：无明显性能问题
- [ ] **测试**：覆盖主要功能和边界
- [ ] **文档**：关键逻辑有注释
- [ ] **依赖**：无不必要的依赖
- [ ] **可维护性**：易于理解和修改

### 调试工具
- **断点调试**：IDE 内置调试器
- **日志输出**：console.log / logger
- **性能分析**：Chrome DevTools / Node.js Profiler
- **内存分析**：Heap Snapshot
- **网络监控**：Network Tab / Charles

