## 测试场景规范

### 测试驱动开发（TDD）
- 先编写测试用例，确保测试失败
- 实现最小可行代码使测试通过
- 重构代码，保持测试通过
- 测试先行，思考接口设计

### 测试用例编写
- 遵循 AAA 模式：Arrange（准备）、Act（执行）、Assert（断言）
- 每个测试只测试一个功能点
- 测试名称清晰描述测试内容
- 测试独立性，不依赖执行顺序
- 避免测试实现细节，关注行为

### 测试覆盖
- **正常情况**：常见用例和预期流程
- **边界条件**：空值、零、最大值、最小值
- **错误情况**：异常输入、网络错误、超时
- **并发场景**：竞态条件、资源竞争
- 目标覆盖率：至少 80%

### 单元测试
- 测试单个函数或方法
- 隔离外部依赖，使用 Mock/Stub
- 快速执行（毫秒级）
- 测试各种输入和边界情况

### 集成测试
- 测试多个模块的交互
- 使用真实或接近真实的环境
- 测试数据库操作、API 调用等
- 测试端到端流程

### Mock 和 Stub
- Mock 外部依赖（数据库、API、文件系统）
- 使用测试框架提供的 Mock 工具
- 验证 Mock 对象的调用次数和参数
- 避免过度 Mock，保持测试真实性

### 前端测试
- **组件测试**：渲染、交互、状态变化
- **用户行为**：点击、输入、表单提交
- **异步操作**：API 调用、加载状态
- 使用 Testing Library 测试用户视角

### 后端测试
- **API 测试**：请求响应、状态码、数据格式
- **业务逻辑**：服务层和数据层
- **中间件**：认证、授权、错误处理
- 使用测试数据库或内存数据库

### 测试最佳实践
- 保持测试简洁和可读
- 及时更新过时的测试
- 测试失败时先修复测试，不要跳过
- 使用测试覆盖率工具监控
- CI/CD 中自动运行测试

### 测试工具
- **JavaScript/TypeScript**：Jest, Vitest, Testing Library
- **Python**：pytest, unittest, mock
- **Java**：JUnit, Mockito, TestNG
- **E2E**：Playwright, Cypress

